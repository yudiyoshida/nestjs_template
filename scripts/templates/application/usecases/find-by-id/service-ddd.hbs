import { Inject, Injectable } from '@nestjs/common';
import { TOKENS } from 'src/core/di/token';
import { {{moduleNamePascal}}NotFoundError } from '../../../domain/errors/{{moduleName}}-not-found.error';
import { {{moduleNamePascal}}Dto } from '../../dtos/{{moduleName}}.dto';
import type { I{{moduleNamePascal}}Dao } from '../../persistence/dao/{{moduleName}}-dao.interface';

@Injectable()
export class Find{{moduleNamePascal}}ById {
  constructor(
    @Inject(TOKENS.{{moduleNamePascal}}Dao) private readonly {{moduleNameCamel}}Dao: I{{moduleNamePascal}}Dao,
  ) {}

  public async execute(id: string): Promise<{{moduleNamePascal}}Dto> {
    const result = await this.{{moduleNameCamel}}Dao.findById(id);
    if (!result) {
      throw new {{moduleNamePascal}}NotFoundError();
    }
    return result;
  }
}
