import { Inject, Injectable } from '@nestjs/common';
import { SuccessMessage } from 'src/core/dtos/success-message.dto';
import { TOKENS } from 'src/core/di/token';
import { {{moduleNamePascal}}NotFoundError } from '../../../domain/errors/{{moduleName}}-not-found.error';
import type { I{{moduleNamePascal}}Repository } from '../../persistence/repository/{{moduleName}}-repository.interface';

@Injectable()
export class Delete{{moduleNamePascal}} {
  constructor(
    @Inject(TOKENS.{{moduleNamePascal}}Repository) private readonly {{moduleNameCamel}}Repository: I{{moduleNamePascal}}Repository,
  ) {}

  public async execute(id: string): Promise<SuccessMessage> {
    const entity = await this.{{moduleNameCamel}}Repository.findById(id);
    if (!entity) {
      throw new {{moduleNamePascal}}NotFoundError();
    }
    await this.{{moduleNameCamel}}Repository.delete(id);
    return { message: 'Exclus√£o realizada com sucesso' };
  }
}
